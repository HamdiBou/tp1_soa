
<div class="container">
  <!-- Header -->
  <header class="header">
    <h1>ğŸ• {{ title }}</h1>
    <p class="subtitle">Choisissez votre restaurant et vos plats prÃ©fÃ©rÃ©s</p>
  </header>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Chargement des restaurants...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error" class="error-message">
    <p>âŒ {{ error }}</p>
    <button (click)="loadRestaurants()" class="btn-retry">RÃ©essayer</button>
  </div>

  <!-- Restaurants List View -->
  <div *ngIf="!loading && !error && !selectedRestaurant" class="restaurants-section">
    <h2>Nos Restaurants</h2>
    <div class="restaurants-grid">
      <div *ngFor="let restaurant of restaurants" 
           class="restaurant-card"
           (click)="selectRestaurant(restaurant)">
        <div class="restaurant-icon">ğŸª</div>
        <h3>{{ restaurant.name }}</h3>
        <p class="restaurant-info">{{ restaurant.plats?.length || 0 }} plats disponibles</p>
        <button class="btn-view">Voir le menu</button>
      </div>
    </div>
  </div>

  <!-- Menu View (Plats) -->
  <div *ngIf="selectedRestaurant" class="menu-section">
    <div class="back-button">
      <button (click)="backToRestaurants()" class="btn-back">â† Retour aux restaurants</button>
    </div>
    
    <h2>{{ selectedRestaurant.name }}</h2>
    
    <div class="plats-grid">
      <div *ngFor="let plat of selectedRestaurant.plats" class="plat-card">
        <div class="plat-info">
          <h3>{{ plat.name }}</h3>
          <p class="plat-price">{{ plat.price | number:'1.2-2' }} â‚¬</p>
          <span *ngIf="plat.disponible === false" class="badge-unavailable">Indisponible</span>
          <span *ngIf="plat.disponible !== false" class="badge-available">Disponible</span>
        </div>
        <button 
          (click)="addToCart(plat)" 
          class="btn-add"
          [disabled]="plat.disponible === false">
          + Ajouter
        </button>
      </div>
    </div>
  </div>

  <!-- Shopping Cart -->
  <div *ngIf="cartItems.length > 0" class="cart">
    <h3>ğŸ›’ Votre Commande</h3>
    <div class="cart-items">
      <div *ngFor="let item of cartItems" class="cart-item">
        <div class="cart-item-info">
          <strong>{{ item.plat.name }}</strong>
          <span class="cart-item-restaurant">{{ item.restaurant.name }}</span>
          <span class="cart-item-price">{{ item.plat.price | number:'1.2-2' }} â‚¬</span>
        </div>
        <div class="cart-item-actions">
          <button (click)="updateQuantity(item.plat.id, item.quantity - 1)" class="btn-qty">-</button>
          <span class="quantity">{{ item.quantity }}</span>
          <button (click)="updateQuantity(item.plat.id, item.quantity + 1)" class="btn-qty">+</button>
          <button (click)="removeFromCart(item.plat.id)" class="btn-remove">ğŸ—‘ï¸</button>
        </div>
      </div>
    </div>
    
    <div class="cart-total">
      <strong>Total: {{ getTotal() | number:'1.2-2' }} â‚¬</strong>
    </div>
    
    <button (click)="validateOrder()" class="btn-validate">
      âœ“ Valider la Commande
    </button>
  </div>

  <!-- Order Confirmation Modal -->
  <div *ngIf="showOrderModal" class="modal-overlay" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h2>âœ… Commande ValidÃ©e!</h2>
      <p>Votre commande a Ã©tÃ© enregistrÃ©e avec succÃ¨s.</p>
      
      <div class="order-summary">
        <h3>RÃ©sumÃ© de votre commande:</h3>
        <ul>
          <li *ngFor="let item of cartItems">
            {{ item.quantity }}x {{ item.plat.name }} - {{ (item.plat.price * item.quantity) | number:'1.2-2' }} â‚¬
          </li>
        </ul>
        <div class="summary-total">
          <strong>Total payÃ©: {{ getTotal() | number:'1.2-2' }} â‚¬</strong>
        </div>
      </div>
      
      <button (click)="closeModal()" class="btn-close">Fermer</button>
    </div>
  </div>
</div>

